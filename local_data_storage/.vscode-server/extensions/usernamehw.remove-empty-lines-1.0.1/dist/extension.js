(()=>{"use strict";var e={496:e=>{e.exports=require("vscode")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(496);let s;const r={manual:!0,afterDelay:!1,focusOut:!1};function i(e){let n=0;const o=t.workspace.getConfiguration(void 0,e).get("remove-empty-lines");return o?(o.allowedNumberOfEmptyLines>=0&&o.allowedNumberOfEmptyLines<=500&&(n=o.allowedNumberOfEmptyLines),{allowedNumberOfEmptyLines:n,runOnSave:o.runOnSave,onSaveReason:o.onSaveReason}):{runOnSave:!1,allowedNumberOfEmptyLines:n,onSaveReason:r}}function a(){s?.dispose(),s=t.workspace.onWillSaveTextDocument((e=>{const n=i(e.document);if(!n.runOnSave)return;if(o=e.reason,s=i().onSaveReason,!(o===t.TextDocumentSaveReason.Manual&&s.manual||o===t.TextDocumentSaveReason.AfterDelay&&s.afterDelay||o===t.TextDocumentSaveReason.FocusOut&&s.focusOut))return;var o,s;if(n.onSaveReason.focusOut&&e.reason===t.TextDocumentSaveReason.FocusOut||n.onSaveReason.afterDelay&&e.reason===t.TextDocumentSaveReason.AfterDelay)return void c(e.document.uri,e.document,[[0,e.document.lineCount-1]],n.allowedNumberOfEmptyLines);const r=function(e){for(const n of t.window.visibleTextEditors)if(n.document===e)return n}(e.document);r&&u(r,!1)}))}function u(e,t,n){const o=i(e.document);"number"==typeof n&&(o.allowedNumberOfEmptyLines=n);const{document:s}=e;if(t){const{selections:t}=e;if(1===t.length&&t[0].isEmpty){if(!s.lineAt(t[0].start.line).isEmptyOrWhitespace)return;{const n=function(e,t){for(let n=e;n>0;n--)if(!t.lineAt(n).isEmptyOrWhitespace)return n;return 0}(t[0].start.line,s),r=function(e,t){for(let n=e;n<t.lineCount;n++)if(!t.lineAt(n).isEmptyOrWhitespace)return n;return t.lineCount-1}(t[0].start.line,s);c(e,s,[[n,r]],o.allowedNumberOfEmptyLines)}}else{const n=[];for(const e of t)n.push([e.start.line,e.end.line]);c(e,s,n,o.allowedNumberOfEmptyLines)}}else c(e,s,[[0,s.lineCount-1]],o.allowedNumberOfEmptyLines)}function c(e,n,o,s){const r=[];for(const e of o){let t=0;for(let o=e[0];o<=e[1];o++){const e=n.lineAt(o);e.isEmptyOrWhitespace?(t++,t>s&&r.push(e.rangeIncludingLineBreak)):t=0}}if(Boolean(e.document))e.edit((e=>{for(const t of r)e.delete(t)}));else{const e=new t.WorkspaceEdit;for(const t of r)e.delete(n.uri,t);t.workspace.applyEdit(e)}}e.activate=function(e){a(),e.subscriptions.push(t.commands.registerTextEditorCommand("remove-empty-lines.inDocument",((e,t,n)=>{u(e,!1,n)}))),e.subscriptions.push(t.commands.registerTextEditorCommand("remove-empty-lines.inSelection",((e,t,n)=>{u(e,!0,n)}))),e.subscriptions.push(t.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("remove-empty-lines")&&a()})))},e.deactivate=function(){}})(),module.exports=o})();